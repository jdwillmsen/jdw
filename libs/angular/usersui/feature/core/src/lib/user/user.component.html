<div class="user-container" data-cy="user-container">
  <form [formGroup]="userForm" class="user-form">
    <h1 class="title" data-cy="title">Account</h1>
    <mat-form-field appearance="fill">
      <mat-label data-cy="email-label">Email</mat-label>
      <input matInput formControlName="emailAddress" readonly data-cy="email-input" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label data-cy="password-label">Password</mat-label>
      <input matInput formControlName="password" type="password" readonly data-cy="password-input" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label data-cy="status-label">Status</mat-label>
      <input matInput formControlName="status" readonly data-cy="status-input" />
    </mat-form-field>

    <h2 *ngIf="roles && roles.controls.length > 0" data-cy="roles-title">
      Roles
    </h2>
    <mat-chip-set *ngIf="roles && roles.controls.length > 0">
      <mat-chip *ngFor="let role of roles.controls" data-cy="role">
        {{ role.value }}
      </mat-chip>
    </mat-chip-set>

    <h1 *ngIf="user?.profile" data-cy="profile-title">Profile</h1>
    <div formGroupName="profile" *ngIf="user?.profile">
      <mat-form-field appearance="fill">
        <mat-label data-cy="first-name-label">First Name</mat-label>
        <input matInput formControlName="firstName" readonly data-cy="first-name-input" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label data-cy="middle-name-label">Middle Name</mat-label>
        <input matInput formControlName="middleName" readonly data-cy="middle-name-input" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label data-cy="last-name-label">Last Name</mat-label>
        <input matInput formControlName="lastName" readonly data-cy="last-name-input" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label data-cy="birthdate-label">Birthdate</mat-label>
        <input matInput formControlName="birthdate" type="date" readonly data-cy="birthdate-input" />
      </mat-form-field>

      <h2
        *ngIf="userForm.get('profile')?.get('icon')?.value"
        data-cy="profile-icon-title"
      >
        Profile Icon
      </h2>
      <img
        *ngIf="userForm.get('profile')?.get('icon')?.value"
        [src]="
          'data:image/png;base64,' + userForm.get('profile')?.get('icon')?.value
        "
        alt="User Icon"
        width="150"
        height="150"
        data-cy="profile-icon-image"
      />

      <h2
        *ngIf="addresses && addresses.controls.length > 0"
        data-cy="addresses-title"
      >
        Addresses
      </h2>
      <div formArrayName="addresses" *ngIf="addresses && addresses.controls.length > 0">
        <div *ngFor="let address of addresses.controls; let i = index" [formGroupName]="i">
          <h3 [attr.data-cy]="'address-title-' + i">Address {{ i + 1 }}</h3>
          <mat-form-field appearance="fill">
            <mat-label [attr.data-cy]="'address-line-1-label-' + i">Address Line 1</mat-label>
            <input matInput formControlName="addressLine1" readonly [attr.data-cy]="'address-line-1-input-' + i" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label [attr.data-cy]="'address-line-2-label-' + i">Address Line 2</mat-label>
            <input matInput formControlName="addressLine2" readonly [attr.data-cy]="'address-line-2-input-' + i" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label [attr.data-cy]="'city-label-' + i">City</mat-label>
            <input matInput formControlName="city" readonly [attr.data-cy]="'city-input-' + i" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label [attr.data-cy]="'state-province-label-' + i">State / Province</mat-label>
            <input matInput formControlName="stateProvince" readonly [attr.data-cy]="'state-province-input-' + i" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label [attr.data-cy]="'postal-code-label-' + i">Postal Code</mat-label>
            <input matInput formControlName="postalCode" readonly [attr.data-cy]="'postal-code-input-' + i" />
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label [attr.data-cy]="'country-label-' + i">Country</mat-label>
            <input matInput formControlName="country" readonly [attr.data-cy]="'country-input-' + i" />
          </mat-form-field>
        </div>
      </div>
    </div>
  </form>
</div>
